<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.spring.boot.dao.AdminDAO">
    <select id="selectQuizType" resultType="QuizTypeVO">
    	SELECT *
    	FROM
    		QUIZ_TYPE
    	ORDER BY QT_NUM DESC
    </select>
    
    <insert id="insertQuizType">
    	INSERT INTO QUIZ_TYPE(QT_NAME) VALUES 
    	(#{qt_name})
    </insert>
    
    <delete id="deleteQuizType">
    	DELETE FROM QUIZ_TYPE WHERE QT_NUM = #{qt_num}
    </delete>
    
    <update id="updateQuizType">
    	UPDATE QUIZ_TYPE SET QT_NAME = #{qt_name} WHERE QT_NUM = #{qt_num}
    </update>
    
    <select id="getCount" resultType="int">
    	SELECT COUNT(*)
    	FROM
   		<if test="cri.type == 'choice'">
   			QUIZ_CHOICE
   		</if>
   		<if test="cri.type == 'subjective'">
   			QUIZ_SUBJECTIVE
   		</if>
   		WHERE 
   			QT_NUM = #{qt_num}
    </select>
    
    <select id="selectQuizListByChoice" resultType="QuizChoiceVO">
    	SELECT *
    	FROM
    		QUIZ_CHOICE
    	WHERE
    		QT_NUM = #{qt_num}
    	ORDER BY QU_NUM DESC
    	LIMIT #{cri.pageStart}, #{cri.perPageNum}
    </select>
    
    <select id="selectQuizListBySubjective" resultType="QuizSubjectiveVO">
    	SELECT *
    	FROM
    		QUIZ_SUBJECTIVE
    	WHERE
    		QT_NUM = #{qt_num}
    	ORDER BY QS_NUM DESC
    	LIMIT #{cri.pageStart}, #{cri.perPageNum}
    </select>
    
    <select id="selectQuizTypeName" resultType="String">
    	SELECT QT_NAME
    	FROM
    		QUIZ_TYPE
    	WHERE
    		QT_NUM = #{qt_num}
    </select>
    
    <insert id="insertQuizChoice">
    	INSERT INTO QUIZ_CHOICE(QU_CONTENT, QU_ANSWER1, QU_ANSWER2, QU_ANSWER3, QU_ANSWER4, QU_CORRECT_ANSWER, QT_NUM) VALUES
    	(#{quiz.qu_content}, #{quiz.qu_answer1}, #{quiz.qu_answer2}, #{quiz.qu_answer3}, #{quiz.qu_answer4}, #{quiz.qu_correct_answer}, #{quiz.qt_num})
    </insert>
    
    <insert id="insertQuizSubjective">
    	INSERT INTO QUIZ_SUBJECTIVE(QS_CONTENT, QS_CORRECT_ANSWER, QT_NUM) VALUES
    	(#{quiz.qs_content}, #{quiz.qs_correct_answer}, #{quiz.qt_num})
    </insert>
</mapper>